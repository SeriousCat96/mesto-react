{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Profile.js","components/Like.js","components/LikePopup.js","components/Card.js","components/Cards.js","components/Main.js","components/Footer.js","components/Page.js","components/Popup.js","utils/constants.js","components/Input.js","hooks/useFormDefaultValues.js","components/Form.js","hooks/useFormValidation.js","components/PopupWithForm.js","components/Popups/AddPlacePopup.js","components/Popups/EditAvatarPopup.js","components/Popups/EditProfilePopup.js","components/Popups/RemoveCardPopup.js","components/ImagePopup.js","utils/Api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","logo","alt","React","Component","memo","CurrentUserContext","createContext","Profile","props","useContext","avatar","name","about","onAddPlacePopupOpen","onEditAvatarPopupOpen","onEditProfilePopupOpen","type","onClick","Like","console","debug","tooltipRef","useRef","useState","isToolTipOverflow","setIsToolTipOverflow","useEffect","current","getBoundingClientRect","right","window","outerWidth","ref","style","left","LikePopup","card","popupRef","isTop","setIsTop","bottom","innerHeight","likes","map","like","_id","Card","item","onRemoveButtonClick","onCardClick","onCardLike","currentUser","isOwned","owner","some","isLikePopupActive","setIsLikePopupActive","bind","undefined","link","onMouseEnter","onMouseLeave","isUserLiked","onAnimationEnd","evt","target","classList","remove","length","Cards","items","onRemoveCardPopupOpen","onImagePopupOpen","Main","cards","Footer","Page","Popup","id","children","isActive","viewClass","onClose","onMouseDown","currentTarget","formSelector","errorClass","inactiveSubmitClass","inputErrorClass","document","querySelector","Input","error","minLength","maxLength","placeholder","value","isInvalid","required","onChange","htmlFor","defaultProps","autoComplete","useFormDefaultValues","inputs","useMemo","values","Object","assign","filter","input","Form","submitTitle","onSubmit","resetTrigger","setValues","errors","setErrors","isValid","setIsValid","defaults","handleChange","validationMessage","closest","checkValidity","handeResetValidation","useCallback","keys","useFormValidation","preventDefault","noValidate","disabled","PopupWithForm","title","isProcessing","processingTitle","propsAreEqual","nextProps","AddPlacePopup","onAddPlace","EditAvatarPopup","onEditAvatar","EditProfilePopup","onEditProfile","RemoveCardPopup","onCardRemove","ImagePopup","selectedCard","CARDS_URL","USER_INFO_URL","LIKE_URL","api","baseUri","headers","this","_baseUri","_headers","cardData","_sendJson","JSON","stringify","cardId","userInfo","url","method","body","uri","fetch","then","response","status","ok","json","Promise","reject","authorization","App","setCurrentUser","setCards","cardToRemove","setCardToRemove","setSelectedCard","isAddPlacePopupActive","setIsAddPlacePopupActive","isEditAvatarPopupActive","setIsEditAvatarPopupActive","isEditProfilePopupActive","setIsEditProfilePopupActive","isRemoveCardPopupActive","setIsRemoveCardPopupActive","isImagePopupActive","setIsImagePopupActive","isAddCardProcessing","setAddCardProcessing","isEditAvatarProcessing","setEditAvatarProcessing","isEditProfileProcessing","setEditProfileProcessing","isRemoveCardProcessing","setRemoveCardProcessing","handleEscKeyPressed","key","handleCloseAllPopups","addEventListener","removeEventListener","all","fetchUserInfo","fetchCards","data","catch","err","getCards","resolve","getUserInfo","Provider","unlike","newCard","c","addCard","finally","setAvatar","setUserInfo","deleteCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.82bba403.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.ff5e7d02.svg\";","import React from 'react';\r\nimport logo from '../images/logo.svg';\r\n\r\nclass Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <header className = \"header page__section page__section_indent-size_s\">\r\n        <img src = {logo} className = \"header__logo\" alt = \"logo\"/>\r\n      </header>\r\n    )\r\n  }\r\n}\r\n\r\nexport default React.memo(Header);","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Profile(props) {\r\n  const { avatar, name, about } = React.useContext(CurrentUserContext);\r\n  const { onAddPlacePopupOpen, onEditAvatarPopupOpen, onEditProfilePopupOpen } = props;\r\n\r\n  return (\r\n    <section className = \"profile page__section page__section_indent-size_m\">\r\n      <div className = \"profile__avatar\">\r\n        <button \r\n          className = \"button profile__button profile__button_type_edit-image\" \r\n          type = \"button\"\r\n          onClick = {onEditAvatarPopupOpen}\r\n        />\r\n        <img className = \"profile__image\" src = {avatar} alt = \"Аватар\" />\r\n      </div>\r\n      <div className = \"profile__info\">\r\n        <h1 className = \"profile__title text-ellipsis\">{name}</h1>\r\n        <p className = \"profile__subtitle text-ellipsis\">{about}</p>\r\n        <button \r\n          className = \"button profile__button profile__button_type_edit\" \r\n          type = \"button\"\r\n          onClick = {onEditProfilePopupOpen}\r\n        />\r\n      </div>\r\n      <button \r\n        className = \"button profile__button profile__button_type_add\" \r\n        type = \"button\"\r\n        onClick = {onAddPlacePopupOpen}\r\n      />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\n\r\nfunction Like(props) {\r\n  const { name, avatar } = props;\r\n  \r\n  console.debug(\"render like\");\r\n  \r\n  const tooltipRef = React.useRef();\r\n  const [isToolTipOverflow, setIsToolTipOverflow] = React.useState(false);\r\n\r\n  const getTooltipPosition = (tooltip) => {\r\n    const tooltipBounds = tooltip.current.getBoundingClientRect();\r\n\r\n    if (tooltipBounds.right > window.outerWidth) {\r\n      setIsToolTipOverflow(true);\r\n    } else {\r\n      setIsToolTipOverflow(false);\r\n    }\r\n  };\r\n\r\n  React.useEffect(\r\n    () => {\r\n      getTooltipPosition(tooltipRef);\r\n    },\r\n    [tooltipRef]\r\n  );\r\n\r\n  return (\r\n    <article className = \"like\">\r\n      <img className = \"like__photo\" src = {avatar} alt = \"Аватар пользователя\"/>\r\n      <span\r\n        ref = {tooltipRef} \r\n        className = \"like__name-tooltip\"\r\n        style = {isToolTipOverflow ? \r\n          {\r\n            left: '50%',\r\n            right: '-50%'\r\n          } \r\n          : \r\n          {}\r\n        }\r\n      >\r\n        {name}\r\n      </span>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Like;","import React from 'react';\r\nimport Like from './Like';\r\n\r\nfunction LikePopup(props) {\r\n  const { card } = props;\r\n  \r\n  console.debug(\"render like popup\");\r\n  \r\n  const popupRef = React.useRef();\r\n  const [isTop, setIsTop] = React.useState(false);\r\n\r\n  const getPosition = (popup) => {\r\n    const popupBounds = popup.current.getBoundingClientRect();\r\n\r\n    if (popupBounds.bottom > window.innerHeight) {\r\n      setIsTop(true);\r\n    } else {\r\n      setIsTop(false);\r\n    }\r\n  };\r\n\r\n  React.useEffect(\r\n    () => {\r\n      getPosition(popupRef);\r\n    },\r\n    [popupRef]\r\n  );\r\n\r\n  return (\r\n    <div \r\n      className = {`likes-view popup_active${isTop ? \" likes-view_pos_top\" : \"\"}`} \r\n      ref = {popupRef}\r\n    >\r\n      <h2 className = \"likes-view__title\">Понравилось:</h2>\r\n      <ul className = \"list likes-view__items\">\r\n        {card.likes.map((like) => (\r\n          <li key = {like._id} >\r\n            <Like \r\n              name = {like.name} \r\n              avatar = {like.avatar} \r\n            />\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LikePopup;","import React from 'react';\r\nimport LikePopup from './LikePopup';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const { item, onRemoveButtonClick, onCardClick, onCardLike } = props;\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwned = item.owner._id === currentUser._id;\r\n  \r\n  item['isUserLiked'] = item.likes.some((like) => like._id === currentUser._id);\r\n\r\n  const handleLikeAnimationEnd = (evt) => evt.target.classList.remove('scaling');\r\n  const [isLikePopupActive, setIsLikePopupActive] = React.useState(false);\r\n\r\n  return (\r\n    <article className = \"card\">\r\n      {\r\n        isOwned && \r\n        <button \r\n          className = \"button card__remove-button\" \r\n          type = \"button\"\r\n          onClick = {onRemoveButtonClick.bind(undefined, item)}\r\n        />\r\n      }\r\n      <img \r\n        className = \"card__image\" \r\n        src = {item.link} \r\n        alt = {`Изображение карточки ${item.name}`}\r\n        onClick = {onCardClick.bind(undefined, item)} \r\n      />\r\n      <h2 className = \"card__caption text-ellipsis\">{item.name}</h2>\r\n      <div \r\n        className = \"card__like\"\r\n        onMouseEnter = {() => setIsLikePopupActive(true)}\r\n        onMouseLeave = {() => setIsLikePopupActive(false)}\r\n      >\r\n        <button \r\n          className = {`button scaling card__like-button${item.isUserLiked ? ' card__like-button_checked' : ''}`}\r\n          type = \"button\"\r\n          onClick = {onCardLike.bind(undefined, item)}\r\n          onAnimationEnd = {handleLikeAnimationEnd}\r\n        />\r\n        <span className = \"card__like-count\">{item.likes.length}</span>\r\n        {isLikePopupActive && item.likes.length > 0 && <LikePopup card = {item} />}\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\n\r\nfunction Cards(props) {\r\n  const { items, onRemoveCardPopupOpen, onImagePopupOpen, onCardLike } = props;\r\n  \r\n  return (\r\n    <section className=\"cards-grid page__section page__section_indent-size_m\">\r\n      <ul className=\"list cards-grid__items\">\r\n        {items.map(item => (\r\n        <li key={item._id}>\r\n          <Card \r\n            item = {item} \r\n            onRemoveButtonClick = {onRemoveCardPopupOpen}\r\n            onCardClick = {onImagePopupOpen}\r\n            onCardLike = {onCardLike}\r\n          />\r\n        </li>\r\n      ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Cards;\r\n","import React from 'react';\r\nimport Profile from './Profile';\r\nimport Cards from './Cards';\r\n\r\nfunction Main(props) {\r\n  const { \r\n    onAddPlacePopupOpen,\r\n    onEditAvatarPopupOpen, \r\n    onEditProfilePopupOpen, \r\n    onRemoveCardPopupOpen,\r\n    onImagePopupOpen,\r\n    onCardLike,\r\n    cards } = props;\r\n\r\n  return (\r\n    <main className = \"content\">\r\n      <Profile\r\n        onAddPlacePopupOpen = {onAddPlacePopupOpen}\r\n        onEditAvatarPopupOpen = {onEditAvatarPopupOpen}\r\n        onEditProfilePopupOpen = {onEditProfilePopupOpen}\r\n      />\r\n      <Cards\r\n        items = {cards}\r\n        onRemoveCardPopupOpen = {onRemoveCardPopupOpen}\r\n        onImagePopupOpen = {onImagePopupOpen}\r\n        onCardLike = {onCardLike}\r\n      />\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nclass Footer extends React.Component {\r\n  render() {\r\n    console.debug(\"rendering footer\");\r\n    return (\r\n      <footer className = \"footer page__section page__section_indent-size_s\">\r\n        <p className = \"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n      </footer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default React.memo(Footer);","import React from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\n\r\nfunction Page(props) {\r\n  return (\r\n    <div className = \"page\">\r\n      <Header />\r\n      <Main {...props} />\r\n      <Footer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Page;","import React from 'react';\r\n\r\nfunction Popup(props) {\r\n  const { id, children, isActive, viewClass, onClose } = props;\r\n\r\n  console.debug(\"render popup\");\r\n\r\n  const handlePopupOverlayMouseDown = (evt) => {\r\n    if (evt.target === evt.currentTarget) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section \r\n      className = {`popup${isActive ? \" popup_active\" : \"\"}`} \r\n      id = { id }\r\n      onMouseDown = {handlePopupOverlayMouseDown}\r\n    >\r\n      <div className = {`${viewClass} popup__view`}>\r\n        {children}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Popup;","export const editAvatarPopupSelector = '.popup#edit-avatar';\r\nexport const editProfilePopupSelector = '.popup#edit-profile';\r\nexport const AddPlacePopupSelector = '.popup#add-card';\r\nexport const removeCardPopupSelector = '.popup#remove-card';\r\nexport const cardPreviewPopupSelector = '.popup#card-preview';\r\nexport const likePopupSelector = '.likes-view';\r\nexport const formSelector = '.form-view__form';\r\nexport const inputSelector = '.form-view__input';\r\nexport const submitSelector = '.form-view__submit';\r\nexport const cardPreviewImageSelector = '.picture-view__image';\r\nexport const cardPreviewCaptionSelector = '.picture-view__caption';\r\nexport const popupCloseBtnSelector = '.popup__close-button';\r\nexport const cardItemsSelector = '.cards-grid__items';\r\nexport const likeItemsSelector = '.likes-view__items';\r\nexport const userNameSelector = '.profile__title';\r\nexport const aboutSelector = '.profile__subtitle';\r\nexport const avatarSelector = '.profile__image';\r\n\r\nexport const cardTemplateSelector = '#card-template';\r\nexport const likesTemplateSelector = '#likes';\r\nexport const likeTemplateSelector = '#like';\r\n\r\nexport const formClass = 'form-view__form';\r\nexport const inputClass = 'form-view__input';\r\nexport const labelClass = 'form-view__field';\r\nexport const submitClass = 'form-view__submit';\r\nexport const errorClass = 'error';\r\nexport const inactiveSubmitClass = 'form-view__submit_disabled';\r\nexport const inputErrorClass = 'form-view__input_type_error';\r\nexport const errorActiveClass = 'error_visible';\r\nexport const popupActiveClass = 'popup_active';\r\nexport const spinnerClass = 'spinner';\r\nexport const spinnerVisibleClass = 'spinner_visible';\r\n\r\nexport const editAvatarBtn = document.querySelector('.profile__button.profile__button_type_edit-image');\r\nexport const editProfileBtn = document.querySelector('.profile__button.profile__button_type_edit');\r\nexport const addCardBtn = document.querySelector('.profile__button.profile__button_type_add');\r\n\r\nexport const validationConfig = {\r\n  formSelector,\r\n  inputSelector,\r\n  submitSelector,\r\n  inactiveSubmitClass,\r\n  inputErrorClass,\r\n  errorClass\r\n};\r\n\r\nexport const cardTemplate = document.querySelector(cardTemplateSelector);\r\nexport const cardsContainer = document.querySelector(cardItemsSelector);\r\nexport const submitProcessDefaultText = 'Сохранение...';\r\nexport const submitProcessRemoveText = 'Удаление...';\r\n\r\nexport const baseUri = 'https://mesto.nomoreparties.co/v1/cohort-18';\r\nexport const headers = {\r\n  authorization: 'e1917e0b-6d7d-4255-81d0-fb0ca13ea044'\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { inputClass, labelClass, errorClass, inputErrorClass, errorActiveClass } from '../utils/constants';\r\n\r\nfunction Input(props) {\r\n  const {\r\n    id,\r\n    name,\r\n    type,\r\n    error,\r\n    minLength,\r\n    maxLength,\r\n    placeholder,\r\n    value,\r\n    isInvalid,\r\n    required,\r\n    onChange,\r\n  } = props;\r\n  \r\n  console.debug(\"render input\");\r\n\r\n  return (\r\n    <label className = {labelClass} htmlFor = {id}>\r\n      <input\r\n        className = {`${inputClass} ${isInvalid ? ` ${inputErrorClass}` : ''}`}\r\n        id = {id}\r\n        name = {name}\r\n        type = {type}\r\n        minLength = {minLength}\r\n        maxLength = {maxLength}\r\n        placeholder = {placeholder}\r\n        onChange = {onChange}\r\n        value = {value}\r\n        required = {required}\r\n      />\r\n      {isInvalid && \r\n        <span \r\n          className = {`${errorClass}${isInvalid ? ` ${errorActiveClass}` : ''}`}\r\n          id = {`${id}-error`}\r\n        >\r\n          {error}\r\n        </span>\r\n      }\r\n    </label>\r\n  );\r\n}\r\n\r\nInput.defaultProps = {\r\n  type: 'text',\r\n  value: '',\r\n  error: '',\r\n  required: true,\r\n  autoComplete: 'off',\r\n};\r\n\r\nInput.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  value: PropTypes.string.isRequired,\r\n  type: PropTypes.string.isRequired,\r\n  placeholder: PropTypes.string,\r\n  defaultValue: PropTypes.string,\r\n  minLength: PropTypes.number,\r\n  maxLength: PropTypes.number,\r\n  error: PropTypes.string,\r\n  required: PropTypes.bool,\r\n  autoComplete: PropTypes.string,\r\n  onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nexport default function useFormDefaultValues(inputs) {\r\n  const defaults = React.useMemo(\r\n    () => {\r\n      const values = {};\r\n      Object.assign(values, ...inputs\r\n        .filter((input) => input.value)\r\n        .map(\r\n          (input) => {\r\n            return {[input.name] : input.value};\r\n          }));\r\n\r\n      return values;\r\n    },\r\n    [inputs]\r\n  );\r\n\r\n  return defaults;\r\n}","import React from 'react';\r\nimport Input from './Input';\r\nimport useFormValidation from '../hooks/useFormValidation';\r\nimport { formClass, submitClass, inactiveSubmitClass } from '../utils/constants';\r\n\r\nfunction Form(props) {\r\n  const {\r\n    name,\r\n    isActive,\r\n    inputs,\r\n    submitTitle,\r\n    onSubmit,\r\n  } = props;\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault(evt);\r\n    onSubmit(values);\r\n  }\r\n\r\n  const {\r\n    values,\r\n    errors,\r\n    isValid,\r\n    handleChange\r\n  } = useFormValidation(inputs, isActive);\r\n  \r\n  console.debug(\"rendering form\");\r\n  console.debug(submitTitle);\r\n  \r\n  return (\r\n    <form\r\n      name = {name}\r\n      className = {formClass}\r\n      onSubmit = {handleSubmit}\r\n      noValidate\r\n    >\r\n      {inputs.map(\r\n        (input) => (\r\n          <Input \r\n            key = {input.id}\r\n            id = {input.id}\r\n            name = {input.name}\r\n            type = {input.type}\r\n            placeholder = {input.placeholder}\r\n            minLength = {input.minLength}\r\n            maxLength = {input.maxLength}\r\n            value = {values[input.name] || ''}\r\n            error = {errors[input.name]}\r\n            isInvalid = {errors[input.name] !== undefined && errors[input.name] !== ''}\r\n            onChange = {handleChange}\r\n            required\r\n          />\r\n        )\r\n      )}\r\n      <button \r\n        type = \"submit\" \r\n        className = {`button ${submitClass}${!isValid ? ` ${inactiveSubmitClass}` : ''}`} \r\n        disabled = {!isValid}\r\n      >\r\n        {submitTitle}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Form;","import React from 'react';\r\nimport useFormDefaultValues from './useFormDefaultValues';\r\nimport { formSelector } from '../utils/constants';\r\n\r\nexport default function useFormValidation(inputs = [], resetTrigger = undefined) {\r\n  const [values, setValues] = React.useState({});\r\n  const [errors, setErrors] = React.useState({});\r\n  const [isValid, setIsValid] = React.useState(false);\r\n  const defaults = useFormDefaultValues(inputs);\r\n\r\n  const handleChange = (evt) => {\r\n    const name = evt.target.name;\r\n    const value = evt.target.value;\r\n    \r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: evt.target.validationMessage });\r\n    setIsValid(evt\r\n      .target\r\n      .closest(formSelector)\r\n      .checkValidity());    \r\n  }\r\n\r\n  const handeResetValidation = React.useCallback(\r\n    (values = {}, errors = {}, isValid = false) => {\r\n      setValues(values);\r\n      setErrors(errors);\r\n      setIsValid(isValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]);\r\n\r\n  React.useEffect(\r\n    () => {\r\n      console.debug('Reset validation');\r\n      const isValid = Object.keys(defaults).length > 0 || inputs.length === 0;\r\n      handeResetValidation(defaults, {}, isValid, inputs);\r\n    },\r\n    [defaults, inputs, handeResetValidation, resetTrigger]\r\n  );\r\n\r\n  return {\r\n    defaults,\r\n    values,\r\n    errors,\r\n    isValid,\r\n    handleChange,\r\n    handeResetValidation,\r\n  }\r\n}","import React from 'react';\r\nimport Popup from './Popup';\r\nimport Form from './Form';\r\n\r\nfunction PopupWithForm(props) {\r\n  const { \r\n    id, \r\n    name, \r\n    title, \r\n    isActive,\r\n    isProcessing,\r\n    submitTitle,\r\n    processingTitle,\r\n    onSubmit,\r\n    onClose,\r\n    inputs } = props;\r\n  \r\n  console.debug(\"Rendering Form Popup\");\r\n\r\n  return (\r\n    <Popup\r\n      id = {id}\r\n      isActive = {isActive}\r\n      onClose = {onClose}\r\n      viewClass = \"form-view\"\r\n    >\r\n      <button \r\n        className = \"button popup__close-button\" \r\n        type=\"button\"\r\n        onClick = {onClose}\r\n      />\r\n      <h2 className=\"form-view__title\">{title}</h2>\r\n      <Form\r\n        name = {name}\r\n        isActive = {isActive}\r\n        submitTitle = {isProcessing ? processingTitle : submitTitle}\r\n        inputs = {inputs}\r\n        onSubmit = {onSubmit}\r\n      />\r\n    </Popup>\r\n  );\r\n}\r\n\r\nPopupWithForm.defaultProps = {\r\n  submitTitle: 'Сохранить',\r\n  processingTitle: 'Сохранение...',\r\n  inputs: [],\r\n};\r\n\r\nfunction propsAreEqual(props, nextProps) {\r\n  return props.isActive === nextProps.isActive && props.isProcessing === nextProps.isProcessing;\r\n}\r\n\r\nexport default React.memo(PopupWithForm, propsAreEqual);","import React from 'react';\r\nimport PopupWithForm from '../PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const { isActive, isProcessing, onAddPlace, onClose } = props;\r\n  \r\n  const inputs = React.useMemo(() => [\r\n    {\r\n      id: 'card-name',\r\n      name: 'name',\r\n      type: 'text',\r\n      placeholder: 'Название',\r\n      minLength: 2,\r\n      maxLength: 30,\r\n      required: true,\r\n    },\r\n    {\r\n        id: 'card-link',\r\n        name: 'link',\r\n        type: 'url',\r\n        placeholder: 'Ссылка на картинку',\r\n        required: true,\r\n    }\r\n  ], []);\r\n\r\n  console.debug(\"render add card popup\");\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      id = \"add-card\"\r\n      name = \"card\"\r\n      title = \"Новое место\"\r\n      isActive = {isActive}\r\n      isProcessing = {isProcessing}\r\n      inputs = {inputs}\r\n      onSubmit = {onAddPlace}\r\n      onClose = {onClose}\r\n    />\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport PopupWithForm from '../PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const { isActive, isProcessing, onEditAvatar, onClose } = props;\r\n  \r\n  console.debug(\"render add card popup\");\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      id = \"edit-avatar\"\r\n      name = \"avatar\"\r\n      title = \"Обновить аватар\"\r\n      isProcessing = {isProcessing}\r\n      isActive = {isActive}\r\n      inputs = {[\r\n        {\r\n            id: 'avatar-link',\r\n            name: 'avatar',\r\n            type: 'url',\r\n            placeholder: 'Ссылка на картинку',\r\n            required: true,\r\n        }\r\n      ]}\r\n      onSubmit = {onEditAvatar}\r\n      onClose = {onClose}\r\n    />\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from '../PopupWithForm';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const { isActive, isProcessing, onEditProfile, onClose } = props;\r\n  const { name, about } = React.useContext(CurrentUserContext);\r\n  const inputs = React.useMemo(() => [\r\n    {\r\n      id: 'name',\r\n      name: 'name',\r\n      type: 'text',\r\n      placeholder: 'Имя',\r\n      minLength: 2,\r\n      maxLength: 40,\r\n      value: name,\r\n      required: true,\r\n    },\r\n    {\r\n      id: 'about',\r\n      name: 'about',\r\n      type: 'text',\r\n      placeholder: 'О себе',\r\n      minLength: 2,\r\n      maxLength: 200,\r\n      value: about,\r\n      required: true,\r\n    }\r\n  ], [about, name]);\r\n\r\n  console.debug(\"render edit profile popup\");\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      id = \"edit-profile\"\r\n      name = \"profile\"\r\n      title = \"Редактировать профиль\"\r\n      isProcessing = {isProcessing}\r\n      isActive = {isActive}\r\n      inputs = {inputs}\r\n      onSubmit = {onEditProfile}\r\n      onClose = {onClose}\r\n    />\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from '../PopupWithForm';\r\n\r\nfunction RemoveCardPopup(props) {\r\n  const { isActive, isProcessing, onCardRemove, onClose } = props;\r\n  \r\n  console.debug(\"render remove card popup\");\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      id = \"remove-card\"\r\n      name = \"removeCard\"\r\n      title = \"Вы уверены?\"\r\n      submitTitle = \"Да\"\r\n      processingTitle = \"Удаление...\"\r\n      isProcessing = {isProcessing}\r\n      isActive = {isActive}\r\n      onSubmit = {onCardRemove}\r\n      onClose = {onClose}\r\n    />\r\n  );\r\n}\r\n\r\nexport default RemoveCardPopup;","import React from 'react';\r\nimport Popup from './Popup';\r\n\r\nfunction ImagePopup(props) {\r\n  const { isActive, selectedCard, onClose } = props;\r\n  \r\n  console.debug(\"render remove card popup\");\r\n  \r\n  return (\r\n    <Popup\r\n      id = \"card-preview\"\r\n      isActive = {isActive}\r\n      onClose = {onClose}\r\n      viewClass = \"picture-view\"\r\n    >\r\n      <div className = \"picture-view__container\">\r\n        <button \r\n          className = \"button popup__close-button\" \r\n          type = \"button\"\r\n          onClick = {onClose}\r\n        />\r\n        <img \r\n          className = \"picture-view__image\" \r\n          src = {selectedCard.link} \r\n          alt = \"Изображение карточки\"\r\n        />\r\n      </div>\r\n      <h2 className = \"picture-view__caption text-ellipsis\">\r\n        {selectedCard.name}\r\n      </h2>\r\n    </Popup>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","import { baseUri, headers } from '../utils/constants.js';\r\n\r\nconst CARDS_URL ='/cards/';\r\nconst USER_INFO_URL = '/users/me/';\r\nconst AVATAR_URL = USER_INFO_URL + 'avatar/';\r\nconst LIKE_URL = '/cards/likes/';\r\n\r\n/**\r\n * Класс для работы с API.\r\n */\r\nexport default class Api {\r\n  constructor({ baseUri, headers }) {\r\n    this._baseUri = baseUri;\r\n    this._headers = headers;\r\n  }\r\n  \r\n  /**\r\n   * Добавить карточку.\r\n   * \r\n   * @param {Object} cardData Данные карточки.\r\n   * @returns {Promise} Результат запроса.\r\n   */\r\n  addCard(cardData) {\r\n    const headers = { ...this._headers, 'Content-Type': 'application/json' };\r\n\r\n    return this\r\n      ._sendJson(CARDS_URL, 'POST', headers, JSON.stringify(cardData));\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} cardId Id карточки.\r\n   * @returns {Promise} Результат запроса.\r\n   */\r\n  deleteCard(cardId) {\r\n    return this\r\n      ._sendJson(CARDS_URL + cardId, 'DELETE', this._headers);\r\n  }\r\n\r\n  /**\r\n   * Получить карточки с сервера.\r\n   * \r\n   * @param {HTMLElement} контейнер с карточками.\r\n   * @returns {Promise} Результат запроса.\r\n   */\r\n  getCards() {\r\n    return this\r\n      ._sendJson(CARDS_URL, 'GET', this._headers);\r\n  }\r\n\r\n  /**\r\n   * Получить информацию о текущем пользователе.\r\n   * \r\n   * @returns {Promise} Результат запроса.\r\n   */\r\n  getUserInfo() {\r\n    return this\r\n      ._sendJson(USER_INFO_URL, 'GET', this._headers);\r\n  }\r\n\r\n  /**\r\n   * Обновить аватар.\r\n   * \r\n   * @param {Object} avatar Данные аватара.\r\n   * @returns {Promise} Результат запроса.\r\n   */\r\n  setAvatar(avatar) {\r\n    const headers = { ...this._headers, 'Content-Type': 'application/json' };\r\n\r\n    return this\r\n      ._sendJson(AVATAR_URL, 'PATCH', headers, JSON.stringify(avatar));\r\n  }\r\n\r\n  /**\r\n   * Обновить информацию о текущем пользователе.\r\n   * \r\n   * @returns {Promise} Результат запроса.\r\n   */\r\n  setUserInfo(userInfo) {\r\n    const headers = { ...this._headers, 'Content-Type': 'application/json' };\r\n\r\n    return this\r\n      ._sendJson(USER_INFO_URL, 'PATCH', headers, JSON.stringify(userInfo));\r\n  }\r\n\r\n  /**\r\n   * Поставить лайк карточке\r\n   * \r\n   * @param {string} cardId Id карточки.\r\n   * @returns {Promise} Результат запроса.\r\n   */\r\n  like(cardId) {\r\n    return this\r\n      ._sendJson(LIKE_URL + cardId, 'PUT', this._headers);\r\n  }\r\n\r\n  /**\r\n   * Убрать лайк у карточки.\r\n   * \r\n   * @param {string} cardId Id карточки.\r\n   * @returns {Promise} Результат запроса.\r\n   */\r\n  unlike(cardId) {\r\n    return this\r\n      ._sendJson(LIKE_URL + cardId, 'DELETE', this._headers);\r\n  }\r\n\r\n  _sendJson(url, method, headers, body) {\r\n    const uri = this._baseUri + url;\r\n\r\n    return fetch(uri, { method, headers, body })\r\n      .then(\r\n        (response) => {\r\n          console.debug(`${method} ${uri} status: ${response.status}`);\r\n\r\n          if(response.ok) {\r\n            return response.json();\r\n          }\r\n          \r\n          return Promise.reject();\r\n        });\r\n  }\r\n}\r\n\r\nexport const api = new Api({ baseUri, headers });","import React from 'react';\r\nimport Page from './Page';\r\nimport AddPlacePopup from './Popups/AddPlacePopup';\r\nimport EditAvatarPopup from './Popups/EditAvatarPopup';\r\nimport EditProfilePopup from './Popups/EditProfilePopup';\r\nimport RemoveCardPopup from './Popups/RemoveCardPopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { api } from '../utils/Api';\r\n\r\nfunction App() {\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  const [cardToRemove, setCardToRemove] = React.useState({});\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n\r\n  const [isAddPlacePopupActive, setIsAddPlacePopupActive] = React.useState(false);\r\n  const [isEditAvatarPopupActive, setIsEditAvatarPopupActive] = React.useState(false);\r\n  const [isEditProfilePopupActive, setIsEditProfilePopupActive] = React.useState(false);\r\n  const [isRemoveCardPopupActive, setIsRemoveCardPopupActive] = React.useState(false);\r\n  const [isImagePopupActive, setIsImagePopupActive] = React.useState(false);\r\n\r\n  const [isAddCardProcessing, setAddCardProcessing] = React.useState(false);\r\n  const [isEditAvatarProcessing, setEditAvatarProcessing] = React.useState(false);\r\n  const [isEditProfileProcessing, setEditProfileProcessing] = React.useState(false);\r\n  const [isRemoveCardProcessing, setRemoveCardProcessing] = React.useState(false);\r\n\r\n  React.useEffect(\r\n    () => {\r\n      const handleEscKeyPressed = (evt) => {\r\n        evt.preventDefault();\r\n    \r\n        if (evt.key === 'Escape') {\r\n          handleCloseAllPopups();\r\n        }\r\n      };\r\n\r\n      document.addEventListener('keyup', handleEscKeyPressed);\r\n\r\n      return () => document.removeEventListener('keyup', handleEscKeyPressed);\r\n    },\r\n    []\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    console.debug(\"load initial data\");\r\n    Promise.all([fetchUserInfo(), fetchCards()])\r\n      .then(\r\n        (data) => {\r\n          const [userInfo, cards] = data;\r\n          setCurrentUser(userInfo);\r\n          setCards(cards);\r\n        })\r\n      .catch((err) => console.error(err));\r\n  }, []);\r\n\r\n  const fetchCards = () => {\r\n    return api\r\n      .getCards()\r\n      .then((items) => Promise.resolve(items))\r\n      .catch(() => Promise.reject(\"Failed to fetch cards.\"));\r\n  }\r\n\r\n  const fetchUserInfo = () => {\r\n    return api\r\n      .getUserInfo()\r\n      .then((userInfo) => Promise.resolve(userInfo))\r\n      .catch(() => Promise.reject(\"Failed to set user info.\"));\r\n  };\r\n\r\n  const handleCardLike = (card) => {\r\n    const isLiked = card.isUserLiked;\r\n    const setLike = isLiked ? api.unlike.bind(api) : api.like.bind(api);\r\n\r\n    setLike(card._id)\r\n      .then(\r\n        (newCard) => {\r\n          setCards(c => c.map((item) => item._id === card._id ? newCard : item));\r\n        }\r\n      )\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  const handleAddPlacePopupOpen = () => {\r\n    setIsAddPlacePopupActive(true);\r\n  };\r\n\r\n  const handleEditAvatarPopupOpen = () => {\r\n    setIsEditAvatarPopupActive(true);\r\n  };\r\n\r\n  const handleEditProfilePopupOpen = () => {\r\n    setIsEditProfilePopupActive(true);\r\n  };\r\n\r\n  const handleRemoveCardPopupOpen = (cardToRemove) => {\r\n    setIsRemoveCardPopupActive(true);\r\n    setCardToRemove(cardToRemove);\r\n  };\r\n\r\n  const handleImagePopupOpen = (card) => {\r\n    setIsImagePopupActive(true);\r\n    setSelectedCard(card);\r\n  };\r\n\r\n  const handleCloseAllPopups = () => {\r\n    setIsAddPlacePopupActive(false);\r\n    setIsEditAvatarPopupActive(false);\r\n    setIsEditProfilePopupActive(false);\r\n    setIsRemoveCardPopupActive(false);\r\n    setIsImagePopupActive(false);\r\n\r\n    setCardToRemove({});\r\n    setSelectedCard({});\r\n  };\r\n\r\n  const handleAddPlace = (values) => {\r\n    setAddCardProcessing(true);\r\n\r\n    api\r\n      .addCard(values)\r\n      .then(\r\n        (newCard) => {\r\n          setCards(c => [newCard, ...c]);\r\n          handleCloseAllPopups();\r\n        })\r\n      .catch(() => console.error(\"Failed to add card.\"))\r\n      .finally(() => setAddCardProcessing(false));\r\n  };\r\n\r\n  const handleEditAvatar = (avatar) => {\r\n    setEditAvatarProcessing(true);\r\n\r\n    api\r\n      .setAvatar(avatar)\r\n      .then(\r\n        (userInfo) => {\r\n          setCurrentUser(userInfo);\r\n          handleCloseAllPopups();\r\n        })\r\n      .catch(() => console.error(\"Failed to edit avatar.\"))\r\n      .finally(() => setEditAvatarProcessing(false));  \r\n  };\r\n\r\n  const handleEditProfile = (userInfo) => {\r\n    setEditProfileProcessing(true);\r\n\r\n    api\r\n      .setUserInfo(userInfo)\r\n      .then(\r\n        (userInfo) => {\r\n          setCurrentUser(userInfo);\r\n          handleCloseAllPopups();\r\n        })\r\n      .catch(() => console.error(\"Failed to edit profile.\"))\r\n      .finally(() => setEditProfileProcessing(false));  \r\n  };\r\n\r\n  const handleCardRemove = () => {\r\n    if(cardToRemove) {\r\n      setRemoveCardProcessing(true);\r\n\r\n      api\r\n        .deleteCard(cardToRemove._id)\r\n        .then(\r\n          () => {\r\n            setCards(c => c.filter((item) => item._id !== cardToRemove._id));\r\n            handleCloseAllPopups();\r\n          })\r\n        .catch(() => console.error(\"Failed to remove card.\"))\r\n        .finally(() => setRemoveCardProcessing(false));  \r\n    }\r\n  };\r\n\r\n  console.debug(\"rendering app\");\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <Page\r\n        onAddPlacePopupOpen = {handleAddPlacePopupOpen}\r\n        onEditAvatarPopupOpen = {handleEditAvatarPopupOpen}\r\n        onEditProfilePopupOpen = {handleEditProfilePopupOpen}\r\n        onRemoveCardPopupOpen = {handleRemoveCardPopupOpen}\r\n        onImagePopupOpen = {handleImagePopupOpen}\r\n        onCardLike = {handleCardLike}\r\n        cards = {cards}\r\n      />\r\n      <AddPlacePopup\r\n        isActive = {isAddPlacePopupActive}\r\n        isProcessing = {isAddCardProcessing}\r\n        onClose = {handleCloseAllPopups}\r\n        onAddPlace = {handleAddPlace}\r\n      />\r\n      <EditAvatarPopup\r\n        isActive = {isEditAvatarPopupActive}\r\n        isProcessing = {isEditAvatarProcessing}\r\n        onClose = {handleCloseAllPopups}\r\n        onEditAvatar = {handleEditAvatar}\r\n      />\r\n      <EditProfilePopup\r\n        isActive = {isEditProfilePopupActive}\r\n        isProcessing = {isEditProfileProcessing}\r\n        onClose = {handleCloseAllPopups}\r\n        onEditProfile = {handleEditProfile}\r\n      />\r\n      <RemoveCardPopup\r\n        isActive = {isRemoveCardPopupActive}\r\n        isProcessing = {isRemoveCardProcessing}\r\n        onClose = {handleCloseAllPopups}\r\n        onCardRemove = {handleCardRemove}\r\n      />\r\n      <ImagePopup\r\n        isActive = {isImagePopupActive}\r\n        selectedCard = {selectedCard}\r\n        onClose = {handleCloseAllPopups}\r\n      />\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}